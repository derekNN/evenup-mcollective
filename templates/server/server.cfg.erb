# Fine managed by puppet - do not modify

topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
logfile = /var/log/mcollective.log
libdir = /usr/libexec/mcollective
loglevel = info
daemonize = 1
registerinterval = 120
classesfile = <%= @classes_file %>

# Plugins
securityprovider = psk
plugin.psk = <%= @psk %>
direct_addressing = 1

connector = activemq
plugin.activemq.pool.size = 1
plugin.activemq.pool.1.host = <%= @stomp_host %>
plugin.activemq.pool.1.port = <%= @stomp_port %>
plugin.activemq.pool.1.user = <%= @stomp_user %>
plugin.activemq.pool.1.password = <%= @stomp_password %>

# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml

# Registration (can be used for keepalive)
registerinterval = 300
registration = Agentlist

<% if @audit_provider -%>
# Audit
rpcaudit = 1
rpcauditprovider = <%= @audit_provider %>
<% if @audit_logfile -%>
plugin.<%= @audit_provider.to_s.downcase %>.logfile = <%= @audit_logfile %>
<% end -%>
<% end -%>

# Puppet plugin whitelist
plugin.puppet.resource_allow_managed_resources = <%= @resource_allow_managed_resources %>
<% if @resource_type_whitelist -%>
plugin.puppet.resource_type_whitelist = <%= @resource_type_whitelist %>
<% end -%>
<% if @resource_type_blacklist -%>
plugin.puppet.resource_type_blacklist = <%= @resource_type_blacklist %>
<% end -%>
